<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Rethinking Actuarial Workflows</title>
    <meta charset="utf-8" />
    <meta name="author" content="Ryan Thomas" />
    <meta name="date" content="2020-01-30" />
    <link href="libs/remark-css/rladies.css" rel="stylesheet" />
    <link rel="stylesheet" href="custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Rethinking Actuarial Workflows
### Ryan Thomas
### rstudio::conf 2020
### 2020-01-30

---

# About Me





---
class: inverse, center, middle

# Spreadsheets:

--

# How we (ab)use them

---

## The Problems with Spreadsheets

* Single File Problems

* Reproducibilty Problems

* Maintainence, Update, and Validation Problems

???

A lot of these problems stem from using a spreadsheet program to build
an analysis application.

---

## The Problem with Spreadsheets

### Single File Problems

Can't be edited/fully accessed by multiple people simultaneously


![Cookie Waiting](images/single_files/cookie_monster_waiting.gif) 
---

## The Problem with Spreadsheets

### Single File Problems

The agglomeration of concerns

&lt;div class="agg-parent"&gt;
  &lt;img src="images/single_files/database.png" class="agg-child-responsive"&gt;

--

  &lt;img src="images/single_files/algorithm-1.jpeg" width="50%" class="agg-child-1"&gt;

--

  &lt;img src="images/single_files/algorithm-2.jpeg" width="30%" class="agg-child-2"&gt;

--

  &lt;img src="images/single_files/algorithm-n.jpeg" width="30%" class="agg-child-3"&gt;

--

  &lt;img src="images/single_files/visualization.jpeg" width="50%" class="agg-child-4"&gt;
&lt;/div&gt;

???
- database

- algorithm/model 1

- algorithm/model 2

- ...

- algorithm/model N

- visualization/reporting
 
---

## The Problem with Spreadsheets

### Reproducibilty Problems

* Two types of reproducibility

 - **Type I**: same input + same model -&gt; same results

 - **Type II**: new input + same model -&gt; analogous results

--

* Both are challenging

---

## The Problem with Spreadsheets

### Reproducibilty Problems

Repeating (or Updating) an analysis can be challenging because the steps of
analysis might be encodeded several different ways (even in the same analysis) 
and may involve manual steps.

???

* spreadsheet formula
* macro 
* notes in a spreadsheet, or across multiple spreadsheets
* separately maintained documentation
* inside the analyst's head

---

## The Problem with Spreadsheets

### Reproducibilty Problems

Particularly accute when one needs to analyze an inherited spreadsheet

---

## The Problem with Spreadsheets

### Reproducibilty Problems

"well understood" update procedures result the "template"


---

## The Problem with Spreadsheets

### Maintainence, Updates, and Validation Problems

no ability to track changes

---

## The Problem with Spreadsheets

### Maintainence, Updates, and Validation Problems

VBA Code editor is ... feature def


---

## The Problem with Spreadsheets

### Maintainence, Updates, and Validation Problems

Difficult to find errors and changes in spreadsheet formula as well as VBA logic

---

## The Problem with Spreadsheets

### Maintainence, Updates, and Validation Problems

brittle to changes
---
class: inverse, center, middle

# Is there a better way?

---

## Is there a better way?

### What do we want?

* Ability to multiple people to maintain/edit/update simultaneously

* separation of concerns

* reproducible

* elastic to changes

* **source control**

* consistent starting place (like the template)

---

## Is there a better way?

### A way to get there.

* Project Template
* Rmarkdown
* git
* Drake

---
class: center, inverse, middle

# Demo

---

## If you'd like to work on this project with me

Kasa AI: [https://kasa.ai](https://kasa.ai)

Slides: https://ryanthomasr.com/talks/rethinking-actuarialworkflows

Example repo: https://github.com/actuarialvoodoo/reproducible-reserving

---
class: center, middle

# Thanks!

Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).

The chakra comes from [remark.js](https://remarkjs.com), [**knitr**](http://yihui.name/knitr), and [R Markdown](https://rmarkdown.rstudio.com).

---
## The Problem with Spreadsheets

### Actuarial Workflow?

![alt text][id]

attribution: https://www.fatherly.com/play/activities/rube-goldberg-machines-joseph-herscher/ 

[id]: images/rube_goldberg.jpeg "Actuarial Workflow"
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
